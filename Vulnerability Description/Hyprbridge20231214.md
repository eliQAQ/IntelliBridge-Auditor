## 漏洞分析

Hypr Network 基于 Optimism 的 OP Stack 构建。OP Stack 是一种允许开发者通过 fork Optimism 模板来部署完整 L2 网络的工具栈。

Hypr 团队在事后发布的技术分析贴中表示：

Hypr 使用了 OP monorepo 中最新的 develop 分支作为部署基础。我们不知道这个分支不是生产环境可用版本，而当时它包含了一个严重尚未修复的安全漏洞。

BlockSec 总结该漏洞如下：

攻击者通过重初始化合约并利用L1StandardBridge.sol中的clearLegacySlot 修饰器，绕过了 finalizeERC20Withdrawal 的检查逻辑。

```
    modifier clearLegacySlot() {
        assembly {
            sstore(0, 0)
        }
        _;
    }
```

```


![](https://raw.githubusercontent.com/RektHQ/Assets/main/images/2023/01/hypr-code.png)

## 参考链接

https://rekt.news/hypr-network-rekt